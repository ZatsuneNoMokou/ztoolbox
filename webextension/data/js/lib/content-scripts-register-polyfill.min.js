!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";const e="object"==typeof window&&(window.browser||new function e(t){return new Proxy(t,{get:(t,r)=>"function"!=typeof t[r]?new e(t[r]):(...e)=>new Promise((n,o)=>{t[r](...e,e=>{chrome.runtime.lastError?o(new Error(chrome.runtime.lastError.message)):n(e)})})})}(window.chrome)),t=/^(https?|wss?|file|ftp|\*):\/\/(\*|\*\.[^*\/]+|[^*\/]+)\/.*$|^file:\/\/\/.*$|^resource:\/\/(\*|\*\.[^*\/]+|[^*\/]+)\/.*$|^about:/,r="object"==typeof navigator&&navigator.userAgent.includes("Firefox/");function n(e){if(!t.test(e))throw new Error(e+" is an invalid pattern, it must match "+String(t));let[,n,o,s]=e.split(/(^[^:]+:[\/][\/])([^\/]+)?/);return"^"+(n=n.replace("*",r?"(https?|wss?)":"https?").replace(/[\/]/g,"[/]"))+(o=(null!=o?o:"").replace(/^[*][.]/,"([^/]+.)*").replace(/^[*]$/,"[^/]+").replace(/[.]/g,"[.]").replace(/[*]$/g,"[^.]+"))+"("+(s=s.replace(/[\/]/g,"[/]").replace(/[.]/g,"[.]").replace(/[*]/g,".*"))+")?$"}"object"!=typeof chrome||chrome.contentScripts||(chrome.contentScripts={async register(t,r){const{js:o=[],css:s=[],allFrames:c,matchAboutBlank:a,matches:i,runAt:u}=t,l=`document[${JSON.stringify(JSON.stringify({js:o,css:s}))}]`,f=function(...e){return e.includes("<all_urls>")?/^(https?|file|ftp):[\/]+/:new RegExp(e.map(n).join("|"))}(...i),m=async(t,r,{url:n})=>{if(n&&f.test(n)&&await async function(t){return e.permissions.contains({origins:[new URL(t).origin+"/*"]})}(n)&&!await async function(t,r){const n=await e.tabs.executeScript(t,{code:r,runAt:"document_start"});return null==n?void 0:n[0]}(t,l)){for(const e of s)chrome.tabs.insertCSS(t,{...e,matchAboutBlank:a,allFrames:c,runAt:null!=u?u:"document_start"});for(const e of o)chrome.tabs.executeScript(t,{...e,matchAboutBlank:a,allFrames:c,runAt:u});chrome.tabs.executeScript(t,{code:`${l} = true`,runAt:"document_start",allFrames:c})}};chrome.tabs.onUpdated.addListener(m);const p={async unregister(){e.tabs.onUpdated.removeListener(m)}};return"function"==typeof r&&r(p),Promise.resolve(p)}})});